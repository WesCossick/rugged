"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[34],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=o.createContext({}),c=function(e){var t=o.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=c(e.components);return o.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,s=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=c(r),d=n,g=m["".concat(i,".").concat(d)]||m[d]||p[d]||s;return r?o.createElement(g,a(a({ref:t},u),{},{components:r})):o.createElement(g,a({ref:t},u))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=r.length,a=new Array(s);a[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:n,a[1]=l;for(var c=2;c<s;c++)a[c]=r[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},4459:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var o=r(7462),n=(r(7294),r(3905));const s={title:"Common JS module system",slug:"/suggested-projects/cjs"},a=void 0,l={unversionedId:"suggested-projects/cjs",id:"suggested-projects/cjs",title:"Common JS module system",description:"When to test",source:"@site/docs/suggested-projects/cjs.md",sourceDirName:"suggested-projects",slug:"/suggested-projects/cjs",permalink:"/docs/suggested-projects/cjs",draft:!1,editUrl:"https://github.com/sparksuite/rugged/edit/master/website/docs/suggested-projects/cjs.md",tags:[],version:"current",frontMatter:{title:"Common JS module system",slug:"/suggested-projects/cjs"},sidebar:"default",previous:{title:"ES module system",permalink:"/docs/suggested-projects/esm"},next:{title:"Node.js environment",permalink:"/docs/suggested-projects/node"}},i={},c=[{value:"When to test",id:"when-to-test",level:2},{value:"What to test",id:"what-to-test",level:2},{value:"How to set up",id:"how-to-set-up",level:2},{value:"Common problems to watch for",id:"common-problems-to-watch-for",level:2},{value:"Require syntax",id:"require-syntax",level:3}],u={toc:c};function p(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"when-to-test"},"When to test"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Your package runs in Node.js"),(0,n.kt)("li",{parentName:"ul"},"Your package is expected to be imported/required by projects"),(0,n.kt)("li",{parentName:"ul"},"Your package uses a conditional export for the Common JS module system",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Via the ",(0,n.kt)("inlineCode",{parentName:"li"},"exports")," key in the ",(0,n.kt)("inlineCode",{parentName:"li"},"package.json")," file")))),(0,n.kt)("h2",{id:"what-to-test"},"What to test"),(0,n.kt)("p",null,"Test that your package works in projects that use the Common JS module system, the default module system in Node.js. This is especially important if your package is written and tested using the ES module system."),(0,n.kt)("h2",{id:"how-to-set-up"},"How to set up"),(0,n.kt)("p",null,"Specify the module type in the ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," file:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json",metastring:'{2} title="test-projects/cjs-module-system/package.json"',"{2}":!0,title:'"test-projects/cjs-module-system/package.json"'},'{\n    "type": "commonjs",\n    "scripts": {\n        "test": "jest"\n    }\n}\n')),(0,n.kt)("h2",{id:"common-problems-to-watch-for"},"Common problems to watch for"),(0,n.kt)("h3",{id:"require-syntax"},"Require syntax"),(0,n.kt)("p",null,"Make sure that your package can be required successfully and without using ",(0,n.kt)("inlineCode",{parentName:"p"},".default"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"const yourPackage = require('your-package'); // Good\nconst yourPackage = require('your-package').default; // Bad\n")))}p.isMDXComponent=!0}}]);